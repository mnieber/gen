{% magic_with __item_name as myItem %}


{% section imports %}
import { MyItemT } from 'src/api/types/MyItemT';
import {
    useSelectionUIConnector,                                                                  {% ?? bvrs_has_selection %}
    useDragAndDropUIConnector,                                                                {% ?? bvrs_has_drag_and_drop %}
} from 'skandha-mobx/hooks';
import { getUpdateUrlFn } from 'src/routes/utils';                                            {% ?? update_url %}
{% end_section %}


{% section props %}
    updateUrl?: (myItem: MyItemT) => void;                                                    {% ?? update_url %}
{% end_section %}


{% section preamble_hooks %}
const dragAndDropUIConnector = useDragAndDropUIConnector(                                     {% if bvrs_has_drag_and_drop %}
    props.myItemsDragAndDrop
);                                                                                            {% endif %}
const selectionUIConnector = useSelectionUIConnector(                                         {% if bvrs_has_selection %}
    props.myItemsSelection,
    {                                                                                         {% if update_url %}
      onSelectItem: getUpdateUrlFn(props.myItems, props.updateUrl),
    },
    [props.myItems, props.updateUrl]                                                          {% endif %}
);                                                                                            {% endif %}
{{ "" }}
{% end_section %}


{% section preamble %}
const noItems = <h2>There are no myItems</h2>;

const myItemDivs = {{ __items_expr }}.map((myItem) => {
  {{ child_widget_div }}
});
{{ "" }}
{% end_section %}


{% section lines %}
{myItemDivs.length > 0 && myItemDivs}
{myItemDivs.length === 0 && noItems}
{% end_section %}


{% end_magic_with %}
