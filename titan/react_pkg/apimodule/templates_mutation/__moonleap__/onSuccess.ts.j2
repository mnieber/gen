{% magic_with order_parent as MyOrderParent %}
{% magic_with order_child as myOrderChild %}
{% magic_with order_ids as myOrderIds %}
{% magic_with api_spec.name as myEndpoint %}
{% magic_with updatePath as myUpdatePath %}
    onSuccess: (response: ObjT{% if _.mutation.api_spec.orders %}, args: ArgsT{% endif %}) => {        {% min_lines count=5 %}
      const updateMyOrderParent = (myOrderParent: MyOrderParentT) => {                                      {% if _.mutation.api_spec.orders %}{% for order_parent, order_child, order_ids, order_api_specs in __.orders_data %}
        myOrderParent.myOrderChild = sortByIds(myOrderParent.myOrderChild, args.myOrderIds);
      };
      queryClient.setQueriesData(['myEndpoint'], (data: any) => {                                           {% for api_spec, updatePaths in order_api_specs %}
        applyUpdate('myUpdatePath', data, updateMyOrderParent);                                             {% !! updatePath in updatePaths %}
        return data;
      });                                                                                                   {% endfor %}{% endfor %}{% endif %}

      response.myOutputFieldName = hydrateMyOutputFieldType(response.myOutputFieldName);                    {% if __.hydrated_fields %}{% for output_field_spec in __.hydrated_fields %}{% ?? output_field_spec.field_type == "fk" %}
      response.myOutputFieldName = R.map(hydrateMyOutputFieldType, response.myOutputFieldName);             {% ?? output_field_spec.field_type == "relatedSet" %}{% endfor %}{% endif %}

      queryClient.invalidateQueries([                                                                       {% if _.mutation.api_spec.invalidates %}
        '{{ queryName }}',                                                                                  {% !! queryName in _.mutation.api_spec.invalidates %}
        {% remove_trailing suffix="," %}
      ]);                                                                                                   {% endif %}
    }                                                                                                       {% end_min_lines %}
{% end_magic_with %}
{% end_magic_with %}
{% end_magic_with %}
{% end_magic_with %}
{% end_magic_with %}
