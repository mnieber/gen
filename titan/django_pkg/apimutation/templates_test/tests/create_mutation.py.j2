from api.tests.codeblock import CodeBlock

{% magic_with res.name as postRedRose %}
{% magic_with output_field_spec.name as yellowTulip %}
def create_post_red_rose_mutation({{ sections.declare_create_mutation_args() }}):
    root = CodeBlock(style="graphql")
    root.IxI("mutation postRedRose", [{{ sections.declare_graphql_mutation_args() }}], " {")
    root.IxI("  postRedRose", [{{ sections.invoke_mutation_endpoint() }}], " {")

    if yellow_tulip_outputs:                                                                    {% for output_field_spec in _.fk_output_field_specs %}
        root.abc("    yellowTulip {")
        root._x_("      ", yellow_tulip_outputs, "")
        root.abc("    }")                                                                       {% endfor %}

    if output_values:
        root._x_("    ", output_values, "")
    root.abc("  }")
    root.abc("}")

    op_name = "postRedRose"
    variables = dict({{ sections.mutation_variables() }})
    return root.result, op_name, variables
{% end_magic_with %}
{% end_magic_with %}
