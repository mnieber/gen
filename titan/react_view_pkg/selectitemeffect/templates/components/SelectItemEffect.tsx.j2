{% magic_with _.component.name as myComponent %}
{% magic_with _.component.item_list.item_name as myItem %}
import { observer } from 'mobx-react-lite';
import { defaultProps as dps, withDefaultProps } from 'src/app/defaultProps';
import { Selection } from 'skandha-facets/Selection';
import { Effect } from 'src/utils/components';
import * as R from 'ramda';
import {
  {{ _.component.item_list.item.ts_type }}
} from 'src/api/types/{{ _.component.item_list.item.type_name }}T';

type ArgsT = {
  myItemsSelection: Selection;
  myItems: {{ _.component.item_list.ts_type }};                             {% ?? __.get_item_id() %}
{{ __.select_effect_args() }}
};

const f = (args: ArgsT) => {
  {{ __.get_item_id() }};                                                   {% if __.get_item_id() %}
  if (myItemId) {
    args.myItemsSelection.selectItem({ itemId: myItemId});
  }
  if (args.myItemId) {                                                      {% else %}
    args.myItemsSelection.selectItem({ itemId: args.myItemId});
  }                                                                         {% endif %}
};

type PropsT = {};

const DefaultProps = {
  ...dps.myItemsSelection,
  ...dps.myItems,                                                           {% ?? __.get_item_id() %}
};

export const MyComponent = observer(
  withDefaultProps((props: PropsT & typeof DefaultProps) => {
    return (
      <Effect
        f={f}
        getArgs={(params) => {
          return {
            myItemsSelection: props.myItemsSelection,
            myItems: props.myItems,                                         {% ?? __.get_item_id() %}
            {{ __.extract_params() }}
          }
        }}
      />
    );
  }, DefaultProps)
);
{% end_magic_with %}
{% end_magic_with %}
