{% magic_with _.component.item_name as yellowTulip %}
import { cn } from 'src/utils/classnames';
import { observer } from 'mobx-react-lite';
import { isLoaded } from 'src/api/ResourceState';
import { defaultProps as dps, withDefaultProps } from 'src/app/defaultProps';
import { Selection } from 'skandha-facets/Selection';
import { Highlight } from 'skandha-facets/Highlight';
import { PickerValueT, ValuePicker } from 'src/utils/components/ValuePicker';
import { YellowTulipT } from 'src/api/types/YellowTulipT';
import UIkit from 'uikit';

type PropsT = {
  className?: any;
};

const DefaultProps = {
  ...dps.yellowTulips,
  ...dps.yellowTulipsHighlight,
  ...dps.yellowTulipsSelection,
};

export const YellowTulipPicker = observer(
  withDefaultProps((props: PropsT & typeof DefaultProps) => {
    if (!isLoaded(props.yellowTulips)) {
      return UIkit && <div data-uk-spinner className=""></div>;                           {% ?? _.service.uikit %}
      return null;                                                                        {% ?? not _.service.uikit %}
    }

    const onChange = (value: PickerValueT) => {
      if (value.__isNew__) {
        // TODO: add yellowTulip
      } else if (value.value) {
        props.yellowTulipsSelection.selectItem({
          itemId: value.value.id
        });
      }
    };

    return (
      <div className={cn('YellowTulipPicker', props.className)}>
        <ValuePicker
          isMulti={false}
          isCreatable={true}
          pickableValues={props.yellowTulips}
          labelFromValue={(x: any) => x.name}
          pickableValue={props.yellowTulipsHighlight.item}
          onChange={onChange}
        />
      </div>
    );
  }, DefaultProps)
);
{% end_magic_with %}